{% extends 'base.html' %}
{% load static %}

{% block title %}{{ meta_title|default:"Мишки Тедди ручной работы" }}{% endblock %}

{% block meta %}
{{ block.super }}
<meta name="description"
      content="{{ meta_description|default:'Авторские мишки Тедди ручной работы для вашей коллекции. Уникальные художественные медведи из мохера и традиционных материалов. Закажите своего эксклюзивного Тедди у мастера' }}">
<meta name="keywords"
      content="{{ meta_keywords|default:'коллекционные мишки тедди, авторский мишка тедди, медведи тедди ручной работы, мишки тедди на заказ, эксклюзивный мишка тедди, тедди для коллекции' }}">
<meta property="og:title" content="{{ meta_title|default:'Мишки Тедди ручной работы' }}">
<meta property="og:description"
      content="{{ meta_description|default:'Авторские мишки Тедди ручной работы для вашей коллекции. Уникальные художественные медведи из мохера и традиционных материалов. Закажите своего эксклюзивного Тедди у мастера' }}">
<meta property="og:type" content="website">
<meta property="og:url" content="https://TeddysTale.ru">
<meta property="og:image" content="{% static 'assets/image/Hero_pic.webp' %}">
<meta property="og:site_name" content="{{ meta_title|default:'Мишки Тедди ручной работы' }}">
<meta name="geo.region" content="RU-SPb">
<meta name="geo.placename" content="{{ contacts_city|default:'Saint-Petersburg' }}">
{% endblock %}

{% block extra_head %}
{{ block.super }}
<!-- Загрузка карты Яндекс -->
<script src="https://api-maps.yandex.ru/2.1/?apikey={{ YANDEX_MAPS_API_KEY }}&lang=ru_RU"></script>
<script>
    // Передаем данные в JS для карты
    var mapData = {
        latitude: {{ contacts_latitude|default:"59.819987" }},
    longitude: {{ contacts_longitude|default:"30.337649" }},
    city: "{{ contacts_city|default:'Санкт-Петербург' }}",
        address: "{{ contacts_address|default:'ул. Среднерогатская' }}"
    };
</script>
{% endblock %}

{% block header %}
{% include 'includes/header.html' %}
{% endblock %}

{% block content %}
<!-- Hero секция -->
<section class="hero" id="home">
    <div class="container">
        <div class="hero-content">
            <div class="hero-content_text">
                <h1 class="hero-content_title">{{ hero_title|default:"Уникальные мишки<br>Тедди с душой"|safe }}</h1>
                <p>{{ hero_description|default:"Ручная работа, наполненная теплом и заботой.<br>Каждый мишка — это отдельная история, созданная специально для вас."|safe }}</p>
                <a href="#collection" class="btn btn-hero">Смотреть коллекцию</a>
            </div>
            <div class="hero-content_image">
                {% if hero_image %}
                <img src="/media/{{ hero_image }}" alt="Мишки Тедди ручной работы" loading="lazy">
                {% else %}
                <img src="{% static 'assets/image/Hero_pic.webp' %}" alt="Мишки Тедди ручной работы" loading="lazy">
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Коллекция -->
<section class="collection" id="collection">
    <div class="collection-divider">
        <div class="collection-divider_container">
            {% include 'includes/waves.html' %}
        </div>
    </div>

    <div class="container">
        <div class="collection-content">
            <h2 class="collection-content_title">Коллекция мишек Тедди</h2>

            <div class="collection-content_cardsGrid">
                {% for display_item in display_items %}
                {% if display_item.type == 'real' %}
                <!-- Динамические товары из БД -->
                {% with item=display_item.item %}
                <div class="card">
                    {% if item.image %}
                    <img src="{{ item.image.url }}" alt="{{ item.title }}" class="card-image" loading="lazy">
                    {% else %}
                    <div class="image-placeholder">
                        <img src="{% static 'assets/icon/favicon.svg' %}" alt="Логотип" class="placeholder-logo">
                    </div>
                    {% endif %}
                    <div class="card-content">
                        <h3 class="card-content_title">{{ item.title }}</h3>
                        <p class="card-content_description">{{ item.description }}</p>
                        <span class="price">{{ item.price }}</span>
                        <a href="#contacts" class="btn btn-card">Купить</a>
                    </div>
                </div>
                {% endwith %}
                {% else %}
                <!-- Карточки-заглушки для пустых слотов -->

                <div class="card placeholder-card">
                    <div class="image-placeholder">
                        <img src="{% static 'assets/icon/favicon.svg' %}" alt="Мишка Тедди" class="placeholder-logo">
                        <span class="placeholder-card__badge">Скоро</span>
                    </div>

                    <div class="card-content">
                        <h3 class="card-content_title">Уникальный мишка</h3>
                        <p class="card-content_description">Мастер уже создаёт нового уникального мишку.</p>
                        <div class="placeholder-card__status">
                            <span class="placeholder-card__status-indicator"></span>
                            <span class="placeholder-card__status-text">Скоро будет готово!</span>
                        </div>

                        <div class="placeholder-card__meta">
                            <span class="price">Бесценно</span>
                        </div>

                        <a href="#contacts" class="btn btn-card placeholder-card__button">
                            <svg class="placeholder-card__button-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z"
                                      stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10 6.66666V10L12.5 12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                      stroke-linejoin="round"/>
                            </svg>
                            Узнать первым
                        </a>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- О мастере -->
<section class="about" id="about">
    <div class="container">
        <div class="about-content">
            <div class="about-content_left">
                <div class="about-content_avatar">
                    {% if about_image %}
                    <img src="/media/{{ about_image }}" alt="Фото мастера" class="avatar">
                    {% else %}
                    <img src="{% static 'assets/image/Avatar.webp' %}" alt="Фото мастера" class="avatar">
                    {% endif %}
                </div>
                <a href="#contacts" class="btn btn-about">Задать вопрос</a>

                <!-- Декоративные волны -->
                <div class="about-content_waves">
                    <div class="about-content_waves_container">
                        {% include 'includes/waves.html' %}
                    </div>
                </div>
            </div>

            <div class="about-content_right">
                <h2 class="about-content_title">{{ about_title1|default:"История мастера" }}</h2>
                <p class="about-content_description">{{ about_description1|default:"Добро пожаловать в мой мир handmade-творчества!<br>Уже более 5 лет я создаю уникальных мишек Тедди, каждый из которых становится особенным другом для своего владельца."|safe }}</p>
                <p class="about-content_description">{{ about_description2|default:"Моя философия — это внимание к деталям, использование только качественных материалов и вложение души в каждое творение."|safe }}</p>

                <div class="trust-me">
                    <h3 class="about-content_listTitle">{{ about_title2|default:"Почему мне доверяют" }}</h3>
                    <ul class="about-content_list">
                        <li>{{ about_item1|default:"5+ лет опыта в создании мишек Тедди" }}</li>
                        <li>{{ about_item2|default:"200+ довольных клиентов" }}</li>
                        <li>{{ about_item3|default:"Натуральные материалы премиум-класса" }}</li>
                        <li>{{ about_item4|default:"Индивидуальный подход к каждому заказу" }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Контакты -->
<section class="contacts" id="contacts">
    <div class="contacts-container">
        <h2 class="contacts-content_title">Контакты</h2>
        <div class="contacts-content">
            <div class="contacts-content_map">
                <div id="map" data-logo-path="{% static 'assets/icon/teedy-logo.svg' %}"></div>
            </div>

            <div class="contacts-content_right">
                <div class="contacts-content_main">
                    <div class="contacts-list">
                        <div class="contact-item">
                            <img src="{% static 'assets/icon/city.svg' %}" alt="Город" class="contact-item_icon">
                            <p class="contact-item_text">{{ contacts_city|default:"Санкт-Петербург" }}</p>
                        </div>

                        <div class="points-divider">
                            <svg width="242" height="24" viewBox="0 0 242 24" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <circle cx="107" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                                <circle cx="121" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                                <circle cx="135" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                            </svg>
                        </div>

                        <div class="contact-item">
                            <img src="{% static 'assets/icon/address.svg' %}" alt="Адрес" class="contact-item_icon">
                            <p class="contact-item_text">{{ contacts_address|default:"ул. Среднерогатская" }}</p>
                        </div>

                        <div class="points-divider">
                            <svg width="242" height="24" viewBox="0 0 242 24" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <circle cx="107" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                                <circle cx="121" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                                <circle cx="135" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                            </svg>
                        </div>

                        <div class="contact-item">
                            <img src="{% static 'assets/icon/phone.svg' %}" alt="Телефон" class="contact-item_icon">
                            <a href="tel:{{ contacts_phone|default:'+79111292655' }}" class="contact-item_link">
                                {{ contacts_phone|default:"+7 (911) 129 - 26 - 55" }}</a>
                        </div>

                        <div class="points-divider">
                            <svg width="242" height="24" viewBox="0 0 242 24" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <circle cx="107" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                                <circle cx="121" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                                <circle cx="135" cy="12" r="2" fill="#E8B4B8" fill-opacity="0.4"/>
                            </svg>
                        </div>

                        <div class="contact-item">
                            <img src="{% static 'assets/icon/email.svg' %}" alt="Email" class="contact-item_icon">
                            <a href="mailto:{{ contacts_email|default:'ev.filenko@rambler.ru' }}"
                               class="contact-item_link">{{ contacts_email|default:"ev.filenko@rambler.ru" }}</a>
                        </div>
                    </div>
                    <div class="contacts-social">
                        <h3 class="contacts-social_title">Я в социальных сетях</h3>
                        <div class="contacts-social_links">
                            <a href="{{ contacts_vk|default:'https://vk.com/id39146412' }}" aria-label="VKontakte"
                               class="contact-link">
                                <img src="{% static 'assets/icon/VK.svg' %}" alt="VK" class="contact-social_icon"
                                     loading="lazy">
                            </a>

                            <a href="{{ contacts_whatsapp|default:'https://wa.me/79111292655' }}" aria-label="WhatsApp"
                               class="contact-link">
                                <img src="{% static 'assets/icon/WhatsApp.svg' %}" alt="WhatsApp"
                                     class="contact-social_iconWA"
                                     loading="lazy">
                            </a>

                            <a href="{{ contacts_telegram|default:'https://t.me/Elen0Fil' }}" aria-label="Telegram"
                               class="contact-link">
                                <img src="{% static 'assets/icon/Telegramm.svg' %}" alt="Telegram"
                                     class="contact-social_icon"
                                     loading="lazy">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Разделитель -->
    <div class="contacts-divider">
        <div class="contacts-divider_container">
            {% include 'includes/waves.html' %}
        </div>
    </div>
</section>
<!-- Эллипсы, которые летают -->
<div class="ellipses">
    <div class="ellipses-small-hero">
        {% include 'includes/ellipses_small.html' %}
    </div>
    <div class="ellipses-middle-hero">
        {% include 'includes/ellipses_middle.html' %}
    </div>
    <div class="ellipses-big-hero">
        {% include 'includes/ellipses_big.html' %}
    </div>
    <div class="ellipses-small-about">
        {% include 'includes/ellipses_small.html' %}
    </div>
    <div class="ellipses-middle-about">
        {% include 'includes/ellipses_middle.html' %}
    </div>
    <div class="ellipses-big-about">
        {% include 'includes/ellipses_big.html' %}
    </div>
    <div class="ellipses-small-contacts">
        {% include 'includes/ellipses_small.html' %}
    </div>
    <div class="ellipses-middle-contacts">
        {% include 'includes/ellipses_middle.html' %}
    </div>
    <div class="ellipses-big-contacts">
        {% include 'includes/ellipses_big.html' %}
    </div>
</div>
{% endblock %}

{% block footer %}
{% include 'includes/footer.html' %}
{% endblock %}

{% block scripts %}
<script src="{% static 'js/bubbles-animation.js' %}"></script>
<script src="{% static 'js/scroll.js' %}"></script>
<script src="{% static 'js/burger-menu.js' %}"></script>
<script src="{% static 'js/map.js' %}"></script>
{% endblock %}